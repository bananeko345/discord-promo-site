<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Discordå®£ä¼ã‚µã‚¤ãƒˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #5865F2, #23272A);
      color: white;
      text-align: center;
    }
    header {
      padding: 70px 20px;
    }
    h1 {
      font-size: 2.7em;
      margin-bottom: 10px;
    }
    p {
      font-size: 1.1em;
    }
    .btn {
      display: inline-block;
      margin: 10px;
      padding: 14px 26px;
      background: #57F287;
      color: #000;
      text-decoration: none;
      font-weight: bold;
      border-radius: 14px;
      transition: transform .15s, box-shadow .15s;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,.3);
    }
    section {
      background: #2c2f33;
      margin: 25px auto;
      padding: 25px;
      border-radius: 20px;
      max-width: 700px;
    }
    input, textarea {
      width: 90%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      margin: 6px 0;
      font-size: 1em;
    }
    textarea { height: 80px; }
    .serverItem {
      background: #23272A;
      padding: 18px;
      margin: 12px 0;
      border-radius: 15px;
      text-align: left;
      animation: fadeIn .3s ease;
    }
    @keyframes fadeIn {
      from {opacity:0; transform:translateY(5px)}
      to {opacity:1; transform:translateY(0)}
    }
    footer {
      padding: 20px;
      font-size: 0.9em;
      opacity: 0.7;
    }
  </style>
</head>
<body>

<header>
  <h1>Discordã‚µãƒ¼ãƒãƒ¼ã‚’å®£ä¼ã—ã‚ˆã†ï¼</h1>
  <p>èª°ã§ã‚‚ç„¡æ–™ã§ã‚µãƒ¼ãƒãƒ¼ã‚’ç´¹ä»‹ã§ãã‚‹å®£ä¼ã‚µã‚¤ãƒˆ</p>
  <a class="btn" href="#post">ã‚µãƒ¼ãƒãƒ¼ã‚’ç™»éŒ²</a>
  <a class="btn" href="#search">ã‚µãƒ¼ãƒãƒ¼ã‚’æ¤œç´¢</a>
</header>

<section>
  <h2>ğŸ”¥ æ–°ç€ã‚µãƒ¼ãƒãƒ¼</h2>
  <p>ãƒ»ãƒã‚¤ã‚¯ãƒ©å‚åŠ å‹ã‚µãƒ¼ãƒãƒ¼</p>
  <p>ãƒ»é›‘è«‡ãƒ»ã‚²ãƒ¼ãƒ ç·åˆã‚µãƒ¼ãƒãƒ¼</p>
</section>

<section id="post">
  <h2>â• ã‚µãƒ¼ãƒãƒ¼æŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ </h2>
  <form onsubmit="addServer(event)">
    <p><input id="name" placeholder="ã‚µãƒ¼ãƒãƒ¼å" required></p>
    <p><input id="invite" placeholder="Discordæ‹›å¾…ãƒªãƒ³ã‚¯" required></p>
    <p><textarea id="desc" placeholder="ã‚µãƒ¼ãƒãƒ¼èª¬æ˜" required></textarea></p>
    <button class="btn" type="submit">æŠ•ç¨¿ã™ã‚‹</button>
  </form>
  <p id="postMsg" style="color:#57F287; display:none;">âœ… æŠ•ç¨¿ã—ã¾ã—ãŸï¼</p>
</section>

<section id="search">
  <h2>ğŸ” ã‚µãƒ¼ãƒãƒ¼æ¤œç´¢</h2>
  <input id="searchInput" placeholder="ã‚µãƒ¼ãƒãƒ¼åã§æ¤œç´¢" onkeyup="searchServer()">
</section>

<section>
  <h2>ğŸ“‹ æŠ•ç¨¿ã•ã‚ŒãŸã‚µãƒ¼ãƒãƒ¼</h2>
  <div id="serverList"></div>
</section>

<script>
  // ====== å…±æœ‰JSON APIï¼ˆGoogle Apps Script ãªã©ï¼‰ ======
  // â€» ä¸‹ã® URL ã‚’è‡ªåˆ†ã® API ã«ç½®ãæ›ãˆã¦ã­
  const API_URL = 'https://SCRIPT_URL_HERE/exec';

  async function loadServers(){
    try{
      const res = await fetch(API_URL);
      const data = await res.json();
      document.getElementById('serverList').innerHTML = '';
      data.forEach(s=>renderServer(s));
    }catch(e){
      console.error(e);
    }
  }

  async function addServer(e){
    e.preventDefault();
    const s = {
      name: document.getElementById('name').value,
      invite: document.getElementById('invite').value,
      desc: document.getElementById('desc').value
    };
    try{
      await fetch(API_URL,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(s)
      });
      document.getElementById('postMsg').style.display='block';
      setTimeout(()=>document.getElementById('postMsg').style.display='none',2000);
      e.target.reset();
      loadServers();
    }catch(e){console.error(e)}
  }

  function renderServer(s){
    const div=document.createElement('div');
    div.className='serverItem';
    div.innerHTML=`<h3>${s.name}</h3><p>${s.desc}</p><a class="btn" href="${s.invite}" target="_blank">å‚åŠ ã™ã‚‹</a>`;
    document.getElementById('serverList').appendChild(div);
  }

  function searchServer(){
    const k=document.getElementById('searchInput').value.toLowerCase();
    document.querySelectorAll('.serverItem').forEach(i=>{
      i.style.display=i.innerText.toLowerCase().includes(k)?'block':'none';
    });
  }

  document.querySelectorAll('a[href="#search"]').forEach(b=>{
    b.addEventListener('click',()=>document.getElementById('search').scrollIntoView({behavior:'smooth'}));
  });

  loadServers();
</script>
